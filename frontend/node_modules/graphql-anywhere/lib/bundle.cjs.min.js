"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("apollo-utilities"),r=require("ts-invariant");function t(r,t,i,a,u,l){void 0===u&&(u={}),void 0===l&&(l={});var o=e.getMainDefinition(t),s=e.getFragmentDefinitions(t),c={fragmentMap:e.createFragmentMap(s),contextValue:a,variableValues:u,resultMapper:l.resultMapper,resolver:r,fragmentMatcher:l.fragmentMatcher||function(){return!0}};return n(o.selectionSet,i,c)}function n(r,t,a){var u=a.fragmentMap,o=a.contextValue,s=a.variableValues,c={};return r.selections.forEach(function(r){if(!s||e.shouldInclude(r,s))if(e.isField(r)){var f=i(r,t,a),v=e.resultKeyNameFromField(r);void 0!==f&&(void 0===c[v]?c[v]=f:l(c[v],f))}else{var p=void 0;if(e.isInlineFragment(r))p=r;else if(!(p=u[r.name.value]))throw new Error("No fragment named "+r.name.value);var d=p.typeCondition.name.value;if(a.fragmentMatcher(t,d,o)){var m=n(p.selectionSet,t,a);l(c,m)}}}),a.resultMapper?a.resultMapper(c,t):c}function i(r,t,i){var u=i.variableValues,l=i.contextValue,o=(0,i.resolver)(r.name.value,t,e.argumentsObjectFromField(r,u),l,{isLeaf:!r.selectionSet,resultKey:e.resultKeyNameFromField(r),directives:e.getDirectiveInfoFromField(r,u),field:r});return r.selectionSet?null==o?o:Array.isArray(o)?a(r,o,i):n(r.selectionSet,o,i):o}function a(e,r,t){return r.map(function(r){return null===r?null:Array.isArray(r)?a(e,r,t):n(e.selectionSet,r,t)})}var u=Object.prototype.hasOwnProperty;function l(e,r){null!==r&&"object"==typeof r&&Object.keys(r).forEach(function(t){var n=r[t];u.call(e,t)?l(e[t],n):e[t]=n})}var o=Object.prototype.hasOwnProperty;function s(e,r,n){void 0===n&&(n={});var i=function(e,r,t,n,i){return r[i.resultKey]};return Array.isArray(r)?r.map(function(r){return t(i,e,r,null,n)}):t(i,e,r,null,n)}function c(e,n,i){void 0===i&&(i={});t(function(e,t,n,a,u){return r.invariant(o.call(t,u.resultKey)||!i&&f(u.field.directives),1),t[u.resultKey]},e,n,{},i,{fragmentMatcher:function(){return!1}})}function f(r){return e.getInclusionDirectives(r).some(function(e){var r=e.ifArgument;return r.value&&"Variable"===r.value.kind})}var v="<<anonymous>>";function p(e){this.message=e,this.stack=""}p.prototype=Error.prototype;var d={prop:"prop",context:"context",childContext:"child context"};function m(e){function r(r,t,n,i,a,u){if(i=i||v,u=u||n,null==t[n]){var l=d[a];return r?null===t[n]?new p("The "+l+" `"+u+"` is marked as required in `"+i+"`, but its value is `null`."):new p("The "+l+" `"+u+"` is marked as required in `"+i+"`, but its value is `undefined`."):null}return e(t,n,i,a,u)}var t=r.bind(null,!1);return t.isRequired=r.bind(null,!0),t}function y(e,r){return void 0===r&&(r=function(e){return null}),m(function(t,n){var i=t[n];try{return i.loading||c(e,i,r(t)),null}catch(e){return e}})}exports.check=c,exports.default=t,exports.filter=s,exports.propType=y;
